(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{1033:function(t,e,a){Promise.resolve().then(a.bind(a,7454))},7454:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return j}});var r=a(7821),o=a(8078),l=a(8504),s=a(5744),n=a(3765),i=a(7881),c=a(3516),d=a(2052),h=a(5945),p=a(296),u=a(4575),x=a(2544),g=a(4252);let m={starter:"#FF725E",bundle:"#0B7897",membership:"#063C5E"},f={"private-users":"Private Users",schools:"Schools",businesses:"Businesses"},y={"private-users":"#FF9B8A",schools:"#0B7897",businesses:"#052A42"};function b(){let t=(0,l.useRouter)(),e=(0,l.useSearchParams)(),a=e.get("page"),b=e.get("type")||"all",j=e.get("category")||"all",Z=Math.max(parseInt(a||"1",10)||1,1),[C,v]=(0,o.useState)([]),[w,S]=(0,o.useState)(!0),[k,F]=(0,o.useState)({total:0,totalPages:1,page:1}),[E,A]=(0,o.useState)(b),[P,W]=(0,o.useState)(j),[B,U]=(0,o.useState)([]),[R,_]=(0,o.useState)([]),L=(0,o.useCallback)(async(t,e,a)=>{try{S(!0);let r={page:t.toString(),limit:"10"};e&&"all"!==e&&(r.type=e),a&&"all"!==a&&(r.category=a);let o=await x.Z.get("/products",{params:r});v(o.data.products||[]),F({total:o.data.total||0,totalPages:o.data.totalPages||1,page:o.data.page||1})}catch(t){console.error("Error fetching products:",t),v([]),F({total:0,totalPages:1,page:1})}finally{S(!1)}},[]),M=(0,o.useCallback)(async()=>{try{let t=await x.Z.get("/products",{params:{all:!0}}),e=Array.from(new Set(t.data.map(t=>t.type).filter(Boolean))).sort(),a=Array.from(new Set(t.data.map(t=>t.category).filter(Boolean))).sort();U(e),_(a)}catch(t){console.error("Error fetching filters:",t)}},[]);(0,o.useEffect)(()=>{M()},[M]),(0,o.useEffect)(()=>{let t=e.get("type")||"all",a=e.get("category")||"all";A(t),W(a)},[e]),(0,o.useEffect)(()=>{L(Z,E,P)},[Z,E,P,L]);let N=e=>{A(e);let a=new URLSearchParams;"all"!==e&&a.set("type",e),"all"!==P&&a.set("category",P),a.set("page","1"),t.push("/shop?".concat(a.toString()))},z=e=>{W(e);let a=new URLSearchParams;"all"!==E&&a.set("type",E),"all"!==e&&a.set("category",e),a.set("page","1"),t.push("/shop?".concat(a.toString()))},D=0===k.total?0:(k.page-1)*10+1,I=0===k.total?0:D+C.length-1;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.default,{}),(0,r.jsx)(s.Z,{component:"main",sx:{pt:{xs:8,md:10},minHeight:"80vh",backgroundColor:"#E9F4FF"},children:(0,r.jsxs)(n.Z,{maxWidth:"lg",sx:{py:12},"data-aos":"zoom-in","data-aos-duration":"800",children:[(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(i.Z,{variant:"h2",textAlign:"center",sx:{mb:2,fontSize:{xs:"2rem",md:"3rem"},fontWeight:700,color:"#063C5E"},children:"Shop"}),(0,r.jsx)(i.Z,{variant:"body1",textAlign:"center",color:"text.secondary",sx:{mb:4},children:"Browse our selection of scam prevention products"})]}),B.length>0&&(0,r.jsxs)(s.Z,{sx:{mb:3,display:"flex",flexWrap:"wrap",gap:1.5,justifyContent:"center"},children:[(0,r.jsx)(i.Z,{variant:"body2",sx:{width:"100%",textAlign:"center",mb:1,fontWeight:600,color:"#063C5E"},children:"Filter by Type:"}),(0,r.jsx)(c.Z,{label:"All Types",onClick:()=>N("all"),sx:{backgroundColor:"all"===E?"#0B7897":"white",color:"all"===E?"white":"#052A42",fontWeight:"all"===E?600:400,cursor:"pointer","&:hover":{backgroundColor:"all"===E?"#063C5E":"#E8F4F8"},transition:"all 0.3s ease"}}),B.map(t=>(0,r.jsx)(c.Z,{label:t.charAt(0).toUpperCase()+t.slice(1),onClick:()=>N(t),sx:{backgroundColor:E===t?m[t]||"#0B7897":"white",color:E===t?"white":"#052A42",fontWeight:E===t?600:400,cursor:"pointer","&:hover":{backgroundColor:E===t?m[t]||"#063C5E":"#E8F4F8"},transition:"all 0.3s ease"}},t))]}),R.length>0&&(0,r.jsxs)(s.Z,{sx:{mb:4,display:"flex",flexWrap:"wrap",gap:1.5,justifyContent:"center"},children:[(0,r.jsx)(i.Z,{variant:"body2",sx:{width:"100%",textAlign:"center",mb:1,fontWeight:600,color:"#063C5E"},children:"Filter by Category:"}),(0,r.jsx)(c.Z,{label:"All Categories",onClick:()=>z("all"),sx:{backgroundColor:"all"===P?"#0B7897":"white",color:"all"===P?"white":"#052A42",fontWeight:"all"===P?600:400,cursor:"pointer","&:hover":{backgroundColor:"all"===P?"#063C5E":"#E8F4F8"},transition:"all 0.3s ease"}}),R.map(t=>(0,r.jsx)(c.Z,{label:f[t]||t.charAt(0).toUpperCase()+t.slice(1),onClick:()=>z(t),sx:{backgroundColor:P===t?y[t]||"#0B7897":"white",color:P===t?"white":"#052A42",fontWeight:P===t?600:400,cursor:"pointer","&:hover":{backgroundColor:P===t?y[t]||"#063C5E":"#E8F4F8"},transition:"all 0.3s ease"}},t))]}),w?(0,r.jsx)(s.Z,{textAlign:"center",py:6,children:(0,r.jsx)(i.Z,{variant:"h6",color:"text.secondary",children:"Loading products..."})}):0===C.length?(0,r.jsx)(s.Z,{textAlign:"center",py:6,children:(0,r.jsx)(i.Z,{variant:"h6",color:"text.secondary",children:"all"!==E||"all"!==P?"No products found matching your filters. Try adjusting your selection.":"No products available in the shop right now. Please check back soon."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.Z,{variant:"body2",color:"text.secondary",textAlign:"center",sx:{mb:3},children:["Showing ",D,"–",I," of ",k.total," products",("all"!==E||"all"!==P)&&(0,r.jsxs)(r.Fragment,{children:[" ","all"!==E&&"(".concat(E,")"),"all"!==P&&" - ".concat(f[P]||P)]})]}),(0,r.jsx)(d.ZP,{"data-aos":"zoom-in","data-aos-duration":"800","data-aos-delay":"100",container:!0,spacing:4,sx:{alignItems:"stretch",mb:4},children:C.map((t,e)=>(0,r.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,r.jsx)(u.Z,{product:t,delay:100*e})},t._id))})]}),k.totalPages>1&&(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,r.jsx)(g.Z,{page:k.page,totalPages:k.totalPages,basePath:"/shop".concat("all"!==E||"all"!==P?"?".concat(new URLSearchParams({..."all"!==E&&{type:E},..."all"!==P&&{category:P}}).toString()):"")})})]})}),(0,r.jsx)(p.Z,{})]})}function j(){return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(s.Z,{sx:{py:12,textAlign:"center"},children:"Loading shop..."}),children:(0,r.jsx)(b,{})})}},4252:function(t,e,a){"use strict";a.d(e,{Z:function(){return n}});var r=a(7821),o=a(693),l=a(5075),s=a(4542);function n(t){let{page:e,totalPages:a,basePath:n="/products"}=t,i=t=>{if(!t||t<1)return n;let[e,a]=n.split("?"),r=new URLSearchParams(a||"");1===t?r.delete("page"):r.set("page",t.toString());let o=r.toString();return o?"".concat(e,"?").concat(o):e};return(0,r.jsx)(o.Z,{count:Math.max(a,1),page:Math.min(Math.max(e,1),Math.max(a,1)),color:"primary",renderItem:t=>(0,r.jsx)(l.Z,{...t,component:s.default,href:i(t.page),shallow:!0})})}},4575:function(t,e,a){"use strict";a.d(e,{Z:function(){return p}});var r=a(7821),o=a(7902),l=a(4944),s=a(9657),n=a(5744),i=a(3516),c=a(7881),d=a(8600),h=a(4542);function p(t){var e,a,p;let{product:u,delay:x=0}=t,g="/images/placeholders/product-default.svg",m="http://localhost:5000",f=m.endsWith("/")?m.slice(0,-1):m,y=null!==(p=null===(e=u.imageUrl)||void 0===e?void 0:e.trim())&&void 0!==p?p:"",b=y.startsWith("/images/"),j=!y||b?g:y.startsWith("http")?y:"".concat(f).concat(y.startsWith("/")?y:"/".concat(y));return(0,r.jsxs)(o.Z,{"data-aos":"fade-up","data-aos-duration":"800","data-aos-delay":x,sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",backgroundColor:"white",transition:"all 0.3s ease-in-out",transform:"translateY(0)",cursor:"pointer","&:hover":{transform:"translateY(-12px) scale(1.03)",boxShadow:"0 12px 32px rgba(0,0,0,0.2)"}},children:[(0,r.jsx)(l.Z,{component:"img",height:"220",image:j||g,alt:u.name,sx:{objectFit:"cover",filter:"saturate(1.05)"}}),(0,r.jsxs)(s.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,r.jsx)(n.Z,{sx:{mb:2,display:"flex",flexWrap:"wrap",gap:1},children:null===(a=u.badges)||void 0===a?void 0:a.map(t=>(0,r.jsx)(i.Z,{label:t,size:"small",color:"primary",sx:{backgroundColor:"rgba(0,139,139,0.1)"}},t))}),(0,r.jsx)(c.Z,{variant:"h5",component:"h3",gutterBottom:!0,sx:{color:"text.primary"},children:u.name}),(0,r.jsx)(c.Z,{variant:"body2",color:"text.secondary",sx:{mb:3,flexGrow:1},children:u.description}),(0,r.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:[(0,r.jsxs)(c.Z,{variant:"h5",sx:{fontWeight:700,color:"primary.main"},children:["€",u.price]}),(0,r.jsx)(d.Z,{variant:"contained",component:h.default,href:"/products/".concat(u.slug),sx:{backgroundColor:"membership"===u.type?"#063C5E":"bundle"===u.type?"#0B7897":"#FFD700",color:"starter"===u.type?"#063C5E":"white",fontWeight:700,textTransform:"uppercase",borderRadius:2,px:3,py:1,"&:hover":{backgroundColor:"membership"===u.type?"#052A42":"bundle"===u.type?"#095f75":"#FFC700"}},children:"View Details"})]})]})]})}}},function(t){t.O(0,[683,853,183,516,190,649,543,115,364,744],function(){return t(t.s=1033)}),_N_E=t.O()}]);